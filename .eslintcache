[{"/Users/bonggus/Desktop/dev/practice/billing/src/Home.js":"1","/Users/bonggus/Desktop/dev/practice/billing/src/index.js":"2","/Users/bonggus/Desktop/dev/practice/billing/src/App.js":"3","/Users/bonggus/Desktop/dev/practice/billing/src/reportWebVitals.js":"4","/Users/bonggus/Desktop/dev/practice/billing/src/Complete.js":"5"},{"size":2413,"mtime":1611993914059,"results":"6","hashOfConfig":"7"},{"size":435,"mtime":1611766416720,"results":"8","hashOfConfig":"7"},{"size":612,"mtime":1611991028328,"results":"9","hashOfConfig":"7"},{"size":362,"mtime":1611752334256,"results":"10","hashOfConfig":"7"},{"size":128,"mtime":1611991009461,"results":"11","hashOfConfig":"7"},{"filePath":"12","messages":"13","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"14"},"1ow5hli",{"filePath":"15","messages":"16","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"17","messages":"18","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"19","messages":"20","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"21","messages":"22","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/bonggus/Desktop/dev/practice/billing/src/Home.js",["23","24","25","26","27"],"import { useState, useEffect, useCallback } from 'react';\nimport axios from 'axios';\nimport {\n  Redirect\n} from \"react-router-dom\";\nimport moment from 'moment';\n\nfunction Home() {\n  const [loading, setLaoding] = useState(false);\n  const [resultMessage, setResultMessage] = useState('');\n  const onSubmitPayment = (e) => {\n    e.preventDefault();\n    const merchant_uid = `issue_billing_key_monthly_${moment().unix()}`\n    const customer_uid = `customer_uid_${moment().unix()}`;\n    window.IMP.request_pay({ // param\n      pg: \"html5_inicis\",\n      pay_method: \"card\", // \"card\"만 지원됩니다\n      merchant_uid, // 빌링키 발급용 주문번호\n      customer_uid, // 카드(빌링키)와 1:1로 대응하는 값\n      // name: \"빌링키발급\",\n      amount: 100, // 0 으로 설정하여 빌링키 발급만 진행합니다.\n    }, rsp => { // callback\n      if (rsp.success) {\n        // 빌링키 발급 성공\n        axios({\n          url: '/billings',\n          method: 'post',\n          headers: { \"Content-Type\": \"application/json\" },\n          data: {\n            customer_uid, // 카드(빌링키)와 1:1로 대응하는 값\n          }\n        })\n        .then(({ data }) =>  {\n          console.log(data);\n          handleResultMessage(data);\n          // if (data) {\n          //   window.location.href = '/complete';\n          // }\n        })\n      } else {\n        // 빌링키 발급 실패\n        const result = {\n          status: rsp.succes,\n          message: rsp.error_msg,\n        };\n        handleResultMessage(result);\n      }\n    });\n  }\n\n  const onSubmitUnsubscribe = async (e) => {\n    e.preventDefault();\n    const { data: result } = await axios({\n      url: '/unsubscribe',\n      method: 'post',\n      headers: { \"Content-Type\": \"application/json\" },\n    });\n    handleResultMessage(result)\n  }\n\n  const handleResultMessage = (res) => {\n    setResultMessage(res);\n    setTimeout(() => {\n      setResultMessage('');\n    }, 3000);\n  }\n\n  return (\n    <div>\n      <h1>아임포트 정기결제 테스트</h1>\n      {resultMessage && <span style={{ color: `${resultMessage.status ? 'blue': 'red'}` }}>{resultMessage.message}</span>}\n      <form onSubmit={onSubmitPayment}>\n        <button type=\"submit\">결제</button> \n      </form>\n      <form onSubmit={onSubmitUnsubscribe}>\n        <button type=\"submit\">취소</button> \n      </form>\n    </div>\n  )\n}\n\nexport default Home\n","/Users/bonggus/Desktop/dev/practice/billing/src/index.js",[],"/Users/bonggus/Desktop/dev/practice/billing/src/App.js",[],"/Users/bonggus/Desktop/dev/practice/billing/src/reportWebVitals.js",[],"/Users/bonggus/Desktop/dev/practice/billing/src/Complete.js",[],{"ruleId":"28","severity":1,"message":"29","line":1,"column":20,"nodeType":"30","messageId":"31","endLine":1,"endColumn":29},{"ruleId":"28","severity":1,"message":"32","line":1,"column":31,"nodeType":"30","messageId":"31","endLine":1,"endColumn":42},{"ruleId":"28","severity":1,"message":"33","line":4,"column":3,"nodeType":"30","messageId":"31","endLine":4,"endColumn":11},{"ruleId":"28","severity":1,"message":"34","line":9,"column":10,"nodeType":"30","messageId":"31","endLine":9,"endColumn":17},{"ruleId":"28","severity":1,"message":"35","line":9,"column":19,"nodeType":"30","messageId":"31","endLine":9,"endColumn":29},"no-unused-vars","'useEffect' is defined but never used.","Identifier","unusedVar","'useCallback' is defined but never used.","'Redirect' is defined but never used.","'loading' is assigned a value but never used.","'setLaoding' is assigned a value but never used."]